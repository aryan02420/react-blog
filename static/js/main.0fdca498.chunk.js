(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{36:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(14),i=n.n(o),s=n(10),l=n(17),a=n(18),j="ADD",b="DELETE",u="SET",d=[],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return[].concat(Object(a.a)(e),[t.value]);case b:return Object(a.a)(e.filter((function(e){return e.id!==t.value})));case u:return Object(a.a)(t.value);default:return e}},h=Object(l.a)({blogs:O}),f=Object(l.b)(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),v=(n(36),n(8)),g=n(1),x=function(e){var t=e.blogs;return Object(g.jsxs)("div",{className:"blog-list",children:[Object(g.jsx)("h1",{children:"All Blogs"}),t.map((function(e){return Object(g.jsxs)("div",{className:"blog-preview",children:[Object(g.jsx)("div",{className:"blog-preview-image"}),Object(g.jsxs)("article",{children:[Object(g.jsxs)("h3",{children:[e.author||"aryan"," \xb7 ",new Date(e.content.time).toLocaleDateString()]}),Object(g.jsx)("h2",{children:e.title}),Object(g.jsx)("p",{className:"summary",children:e.summary}),Object(g.jsx)(v.b,{to:"/blogs/".concat(e.id),children:"Read more"})]})]},e.id)}))]})},p=n(5),m=function(e){var t=Object(c.useState)(null),n=Object(p.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(!0),s=Object(p.a)(i,2),l=s[0],a=s[1],j=Object(c.useState)(null),b=Object(p.a)(j,2),u=b[0],d=b[1];return Object(c.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal}).then((function(e){if(!e.ok)throw Error("could not fetch the data for that resource");return e.json()})).then((function(e){o(e),d(null),a(!1)})).catch((function(e){"AbortError"===e.name?console.log("fetch aborted"):(d(e.message),a(!1))})),function(){return t.abort()}}),[e]),{data:r,isPending:l,error:u}},w=function(){var e=m("https://aryan02420-json-blog.herokuapp.com/blogs"),t=e.error,n=e.isPending,r=e.data,o=Object(s.c)((function(e){return e.blogs})),i=Object(s.b)();return Object(c.useEffect)((function(){0===o.length&&!t&&!n&&i({type:u,value:r})}),[r,n,o.length,i,t]),Object(g.jsxs)("div",{className:"home",children:[t&&Object(g.jsx)("div",{children:t}),n&&Object(g.jsx)("div",{children:"Loading..."}),o&&Object(g.jsx)(x,{blogs:o.sort((function(e,t){return e.id-t.id})).reverse()})]})},E=n(23),S=n(25),y=n.n(S),N=n(26),_=n.n(N),k=n(27),T=n.n(k),D=n(28),R=n.n(D),L=function(e,t,n){return new y.a({holder:null!==e&&void 0!==e?e:"editorjs",tools:{header:{class:_.a,config:{placeholder:"heading",levels:[1,2,3,4,5,6],defaultLevel:3}},list:{class:T.a,inlineToolbar:!0},image:R.a},data:null!==t&&void 0!==t?t:{},placeholder:"Let`s write an awesome blog!",readOnly:null!==n&&void 0!==n&&n})},A=function(e,t){console.log(e,t),console.log("effect");var n=new Headers;n.append("Content-Type","application/json");var c=JSON.stringify(t);fetch(e,{method:"POST",headers:n,body:c,redirect:"follow"}).then((function(e){if(!e.ok)throw Error("could not fetch the data for that resource");return e.json()})).then((function(e){console.log("SUCCESS")})).catch((function(e){}))},C=n(3),P=function(){var e=Object(c.useRef)({});Object(c.useEffect)((function(){e.current=L("blog-editor")}),[]);var t=Object(c.useState)(!1),n=Object(p.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(null),l=Object(p.a)(i,2),a=l[0],b=l[1],u=Object(c.useState)(null),d=Object(p.a)(u,2),O=d[0],h=d[1],f=Object(c.useState)(null),v=Object(p.a)(f,2),x=v[0],m=v[1],w=Object(c.useRef)(!1),S=Object(s.b)(),y=Object(s.c)((function(e){return e.blogs})).length;return Object(c.useEffect)((function(){if(O){var e,t,n,c,r,i,s=null===(e=O.blocks)||void 0===e||null===(t=e.find((function(e){return"header"===e.type})))||void 0===t||null===(n=t.data)||void 0===n?void 0:n.text,l=null===(c=O.blocks)||void 0===c||null===(r=c.find((function(e){return"paragraph"===e.type})))||void 0===r||null===(i=r.data)||void 0===i?void 0:i.text;s&&l?(b(null),m({title:s,summary:l,author:"aryan",content:O}),o(!1)):(b("please write something"),m(null),o(!1))}else b(null)}),[O]),Object(c.useEffect)((function(){var e;x&&(A("https://aryan02420-json-blog.herokuapp.com/blogs/",x),S((e=Object(E.a)(Object(E.a)({},x),{},{id:y+1}),{type:j,value:e})),o(!1),w.current=!0)}),[x,S,y]),Object(g.jsxs)("div",{id:"new-blog",children:[Object(g.jsx)("h1",{children:"New Blog"}),Object(g.jsx)("div",{id:"blog-editor"}),Object(g.jsx)("button",{onClick:function(t){t.preventDefault(),o(!0),e.current.save().then((function(e){h(e)}))},children:"POST"}),a&&Object(g.jsx)("div",{children:a}),r&&Object(g.jsx)("div",{children:"Posting..."}),w.current&&Object(g.jsx)(C.a,{to:"/"})]})},B=function(){var e=Object(C.g)().id,t=Object(s.c)((function(e){return e.blogs})).find((function(t){return t.id===+e})),n=Object(c.useRef)({}),r=Object(c.useState)(!1),o=Object(p.a)(r,2),i=o[0],l=o[1];return Object(c.useEffect)((function(){n.current=L("blog-viewer",{},!0),n.current.isReady.then((function(){l(!0)}))}),[]),Object(c.useEffect)((function(){i&&t&&t.content&&n.current.render(t.content)}),[i,t]),Object(g.jsxs)("div",{className:"blog-details",children:[!i&&Object(g.jsx)("div",{children:"Loading..."}),Object(g.jsx)("div",{id:"blog-viewer"})]})},X=function(){var e=Object(c.useState)(5),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){r(3)}),[]),Object(g.jsxs)("div",{className:"not-found",children:[Object(g.jsx)("h2",{children:"That page does not exist"}),Object(g.jsxs)("p",{children:["Redirecting in ",n]}),Object(g.jsxs)("p",{children:["OR ",Object(g.jsx)(v.b,{to:"/",children:"click here"})]})]})},I=n.p+"static/media/logo.fb6d40c2.svg",J=function(){return Object(g.jsxs)("nav",{className:"navbar",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:I,alt:"logo"}),Object(g.jsx)("h1",{children:"React Blog"})]}),Object(g.jsxs)("div",{className:"links",children:[Object(g.jsx)(v.b,{to:"/",children:"Home"}),Object(g.jsx)(v.b,{to:"/about",children:"About"}),Object(g.jsx)(v.b,{to:"/new",children:"New"})]})]})};var U=function(){return Object(g.jsx)(v.a,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(J,{}),Object(g.jsx)("div",{className:"content",children:Object(g.jsxs)(C.d,{children:[Object(g.jsx)(C.b,{exact:!0,path:"/",children:Object(g.jsx)(w,{})}),Object(g.jsx)(C.b,{path:"/about"}),Object(g.jsx)(C.b,{path:"/new",children:Object(g.jsx)(P,{})}),Object(g.jsx)(C.b,{path:"/blogs/:id",children:Object(g.jsx)(B,{})}),Object(g.jsx)(C.b,{path:"*",children:Object(g.jsx)(X,{})})]})})]})})};i.a.render(Object(g.jsx)(s.a,{store:f,children:Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(U,{})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.0fdca498.chunk.js.map